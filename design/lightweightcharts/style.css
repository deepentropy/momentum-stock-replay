/* --- Global / controls --- */
body {
  margin: 0;
  padding: 0;
  background: #181818;
  color: #DDD;
  font-family: sans-serif;
  height: 100%;
}

/* --- Main layout : sidebar left, chart right --- */
#main {
  display: flex;
  height: calc(100vh - 48px); /* 48px ≈ controls height */
}

/* --- Sidebar (gauche) --- */
#sidebar {
  /* on passe à 400px ou à 30% de l'écran, selon ce qui vous convient */
  flex: 0 0 400px;       /* largeur fixe de 400px */
  /* ou, pour un tiers de l'écran :
     flex: 0 0 30vw;    largeur = 30% de la fenêtre */
  background: #222;
  display: flex;
  flex-direction: column;
  border-right: 1px solid #444;
  box-sizing: border-box; /* pour inclure padding/bordure */
}


/* Liste de fichiers (en haut) */
#fileListContainer {
  flex: 0 0 auto;
  max-height: 200px;
  overflow-y: auto;
  border-bottom: 1px solid #444;
}
.file-item {
  padding: 8px 12px;
  cursor: pointer;
  border-bottom: 1px solid #333;
  color: #DDD;
  user-select: none;
}
.file-item:hover,
.file-item.selected {
  background: #444;
}

/* Métadonnées (au milieu) */
#metadata-container {
  flex: 0 0 auto;
  padding: 8px 12px;
  background: #2a2a2a;
  border-bottom: 1px solid #444;
}
.metadata-item {
  margin-bottom: 4px;
  font-size: 14px;
}
/* --- Conteneur du tableau sous le chart --- */
#table-container {
  padding: 8px;
  background: #181818;
  overflow-x: auto;      /* scroll horizontal */
  overflow-y: auto;      /* scroll vertical */
  max-height: 200px;     /* limite la hauteur et permet le scroll */
  border-top: 1px solid #444;
  position: relative;    /* pour que les th collés soient relatifs à ce conteneur */
}

/* --- Tableau --- */
#table-container table {
  width: auto;           /* colonnes ajustées au contenu */
  border-collapse: collapse;
  font-size: 12px;
}
/* --- Conteneur du tableau --- */
#table-container {
  position: relative;       /* référence pour le sticky */
  overflow-x: auto;         /* scroll horizontal si besoin */
  overflow-y: auto;         /* scroll vertical */
  max-height: 600px;        /* hauteur maxi, puis scroll */
  background: #181818;
  border-top: 1px solid #444;
}

/* --- Table --- */
#table-container table {
  border-collapse: separate;  /* IMPORTANT : sépare les bordures */
  border-spacing: 0;
  width: max-content;         /* colonnes à la taille du contenu */
  font-size: 12px;
}

/* --- En-tête collant --- */
#table-container thead {
  position: sticky;         /* colle le thead */
  top: 0;                   /* tout en haut du conteneur */
  z-index: 100;             /* au-dessus de tout */
}
#table-container thead th {
  background-color: #2a2a2a; /* fond opaque */
  color: #DDD;
  border-bottom: 2px solid #333;
  padding: 4px 6px;
  text-align: right;
}

/* --- Lignes du corps --- */
#table-container tbody td {
  border: 1px solid #333;
  padding: 4px 6px;
  text-align: right;
}

/* --- Ligne surlignée --- */
#table-container tbody tr.highlight {
  background-color: #3a3a3a;
}


/* --- Chart container (droite) --- */
#chart-container {
  flex: 1 1 0;           /* laisser grandir et rapetisser */
  min-width: 0;          /* ! permet au container de rétrécir */
  position: relative;
  background: #181818;
}
#container {
  width: 100%;
  height: 100%;
  position: relative;
}

/* --- Légendes dans le chart --- */
#header {
  position: absolute;
  top: 8px;
  left: 8px;
  z-index: 10;
  background: rgba(35, 35, 35, 0.75);
  padding: 6px 10px;
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  font-size: 13px;
  color: #DDD;
  white-space: nowrap;
}
#static-legend {
  margin-bottom: 4px;
}
#dynamic-legend {
  font-size: 12px;
  line-height: 1.3;
}
.dynamic-line {
  margin-bottom: 2px;
  white-space: nowrap;
}

/* --- Couleurs pour change --- */
.change-positive { color: #4caf50; }
.change-negative { color: #f44336; }
.legend-item { margin-right: 12px; }
/* Override des inline styles générés par la librairie */
.tv-lightweight-charts {
  /* Permet aux canvases de déborder si besoin (overflow: hidden reset) */
  overflow: visible !important;
  /* Force la largeur à 100% du parent, même si inline width est fixé */
  width: 100% !important;
  /* Et on ne limite pas la taille minimale */
  min-width: 0 !important;
}

/* Si la table interne a aussi un inline width */
.tv-lightweight-charts table {
  width: 100% !important;
}

